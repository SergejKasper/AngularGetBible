!function(e){e.module("angularGetBible.config",[]).value("angularGetBible.config",{debug:!0}),e.module("angularGetBible.directives",[]),e.module("angularGetBible.services",[]),e.module("angularGetBible.templates",[]),e.module("angularGetBible",["angularGetBible.config","angularGetBible.directives","angularGetBible.services","angularGetBible.templates"])}(angular),angular.module("angularGetBible.services").provider("GetBibleService",function(){function e(e){this.getVerse=function(t,s,r,n){return t=t||"",s=s||"",r=r?":"+r.toString():"",n=n||"kjv",e.jsonp("http://getbible.net/json?getbible=JSON_CALLBACK",{params:{p:t+s+r,v:n}})},this.getVerses=function(e,t,s){return this.getVerse(e,t,!1,s)},this.getBooks=function(t){return e.jsonp("http://getbible.net/json?getbible=",{params:{callback:"JSON_CALLBACK",option:"com_getbible",task:"bible.books",format:"json",v:t}})},this.getChapters=function(t,s){return e.jsonp("http://getbible.net/json?getbible=",{params:{callback:"JSON_CALLBACK",option:"com_getbible",task:"bible.chapter",format:"json",v:s,nr:t}})}}this.$get=["$http",function(t){return new e(t)}]}),angular.module("angularGetBible.directives").directive("getBibleNavigation",function(e,t){return{scope:{showOptions:"=?shownOptions",selectedVersion:"=?selectedVersion",selectedChapter:"=?selectedChapter",selectedBook:"=?selectedBook",selectedVerses:"=?selectedVerses",selection:"=?selection"},link:function(e){e.selection={};var s=["version","book","chapter","verse"];e.selectedVersion=e.selectedVersion||"kjv",e.selectedBook=e.selectedBook||"",e.selectedChapter=e.selectedChapter||"",e.selectedVerses=e.selectedVerses||[],e.shownOptions=e.shownOptions||s,e.$watch("shownOptions",function(t){e.options=s.filter(function(e){return-1!==t.indexOf(e)})}),t.getBooks(e.selectedVersion).success(function(t){e.books=t}).error(function(e){console.log(e)}),e.selectBook=function(s){e.selectedBook=s,s&&t.getChapters(s.book_nr,e.selectedVersion).success(function(t){e.chapters=t}).error(function(e){console.log(e)})},e.selectChapter=function(s){e.selectedChapter=s,s&&t.getVerses(e.selectedBook.book_name,s,e.selectedVersion).success(function(t){e.verseNrs=Object.keys(t.chapter),e.verses=t}).error(function(e){console.log(e)})},e.selectVerses=function(t){-1===e.selectedVerses.indexOf(t)?e.selectedVerses.push(t):e.selectedVerses=e.selectedVerses.filter(function(e){return e!==t}),e.selection.verses=e.selectedVerses.map(function(t){return e.verses.chapter[t]}),e.selection.verse_nr=e.selectedVerses,e.selection.book_name=e.verses.book_name,e.selection.chapter_nr=e.verses.chapter_nr}},template:e.get("angular-get-bible/templates/Navigation.template.html")}}),angular.module("angularGetBible.directives").directive("getBibleVerseLinkView",function(e){return{restrict:"AE",transclude:!0,scope:!0,replace:!1,controller:function(e){e.showing=!1,e.book="John",e.chapter="3",e.verse_nr=[16],this.showScripture=function(t,s,r){e.$apply(function(){e.showing=!0,e.book=t,e.chapter=s,e.verse_nr=r})},this.setShow=function(t){e.$apply(function(){e.showing=t})}},template:e.get("angular-get-bible/templates/VerseLinkView.template.html")}}).directive("getBibleVerseLink",function(){return{require:"^getBibleVerseLinkView",restrict:"AC",link:function(e,t,s,r){t.on("click",function(e){e.preventDefault();var t={},s=decodeURIComponent;e.target.search.substring(1).split("&").forEach(function(e){var r=e.split("=");t[s(r[0])]=s(r[1])}),r.showScripture(t.b,t.chNr,JSON.parse(t.vNrs)),r.setShow(!0)})}}}),angular.module("angularGetBible.directives").directive("getBibleViewVerses",function(e,t){return{scope:{verses:"=?verses",verseNr:"&verse_nr",chapterNr:"&chapter_nr",bookName:"&book_name",useApi:"&"},link:function(e,s,r){var n=function(){"undefined"!=typeof r.useApi&&r.chapterNr&&!isNaN(r.chapterNr)&&r.bookName&&t.getVerses(r.bookName,r.chapterNr,"kjv").success(function(t){var s=r.verseNr?JSON.parse(r.verseNr):Object.keys(t.chapter);e.verses=s.map(function(e){return t.chapter[e]}),e.bookName=t.book_name,e.chapterNr=t.chapter_nr}).error(function(e){console.log(e)})};e.$watch(function(){return[e.verses,r.versesNr,r.chapterNr,r.bookName]},n,!0)},template:e.get("angular-get-bible/templates/ViewVerses.template.html")}});